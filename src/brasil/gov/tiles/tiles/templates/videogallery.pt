<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="brasil.gov.tiles">

    <head>
        <tal:comment tal:replace="nothing">FIXME: Ver mediacarousel.pt para entender a regra css abaixo.</tal:comment>
        <style type="text/css" media="screen">div[data-fieldname="videogallery.more_link"]{display:none;}</style>
    </head>

    <body tal:define="tile_id view/id;">
      <div class="videogallery-tile"
           tal:attributes="id string:videogallery-$tile_id"
                 tal:define="fields view/get_configured_fields;
                             items view/results;"
           tal:condition="items">

        <tal:fields repeat="field fields">
            <tal:tile_title condition="python:field['id']=='tile_title' and view.show_tile_title()">
                <span tal:define="htmltag python:field.get('htmltag', 'h2');
                                  tile_title view/data/tile_title"
                    tal:omit-tag="">
                    <h1 class="gallery-tile"
                        tal:content="tile_title"
                        tal:condition="python:htmltag == 'h1'" />
                    <h2 class="gallery-tile"
                        tal:content="tile_title"
                        tal:condition="python:htmltag == 'h2'" />
                    <h3 class="gallery-tile"
                        tal:content="tile_title"
                        tal:condition="python:htmltag == 'h3'" />
                    <h4 class="gallery-tile"
                        tal:content="tile_title"
                        tal:condition="python:htmltag == 'h4'" />
                </span>
            </tal:tile_title>
        </tal:fields>
        <div class="videogallery-inner">
          <div class="player-holder" tal:define="first_item python:items[0] if items else None"
                                     tal:condition="first_item">
            <div class="player-video"><tal:block tal:replace="structure first_item/embed_html"></tal:block></div>
            <div class="player-metadata">
              <div class="player-metadata-wrapper">
                <span class="subtitle" tal:content="view/data/subtitle"></span>
                <h3 class="title" tal:content="first_item/title"></h3>
                <p class="description" tal:content="first_item/description"></p>
              </div>
            </div>
            <div class="visualClear"></div>
          </div>
          <div class="galery-items"
               tal:define="last_item python:items[-1] if items else None">
            <div class="galery-items-wrapper">
              <tal:items repeat="item items">
                <div class="gallery-element" tal:attributes="class python:'gallery-element' + (' selected' if repeat['item'].start else '') + (' last' if item == last_item else '')">
                  <div class="gallery-element-wrapper">
                    <a tal:attributes="href item/absolute_url;
                                       data-player-dom item/embed_html;
                                       id python: 'gallerylink-' + str(view.data['uuid_container']) + '-' + str(view.get_uuid(item));"
                       class="gallery-element-link">
                        <tal:image define="thumbnail python:view.thumbnail(item);"
                                   condition="thumbnail">
                          <img tal:define="uuid python:view.get_uuid(item);"
                               tal:condition="python:thumbnail and uuid"
                               tal:attributes="src thumbnail/url;
                                               width thumbnail/width;
                                               height thumbnail/height;
                                               data-title string:<a href='${item/absolute_url}/view'>${item/title}</a>;
                                               data-description item/Description;
                                               data-link string:${item/absolute_url}/view;
                                               data-uuid uuid;
                                               alt python: thumbnail.context.Title()" />
                        </tal:image>
                    </a>
                    <div class="gallery-element-metadata">
                      <span class="title" tal:content="item/title"></span>
                      <p class="description" tal:content="item/description"></p>
                    </div>
                  </div>
                </div>
              </tal:items>
            </div>
          <div class="visualClear"></div>
        </div>
        <div class="visualClear"></div>

        </div>

        <div tal:condition="python:view.data.get('footer_text')" class="gallery-footer">
            <a tal:define="more_link_text python:view.data.get('more_link_text')"
               tal:content="python:more_link_text if more_link_text is not None else view.data.get('footer_text')"
               tal:attributes="href view/data/footer_text">
               </a>
        </div>

      </div>
      <noscript>
          <div class="error" i18n:domain="brasil.gov.tiles" i18n:translate="">Your internet browser this not support JavaScript, therefore some features of the website may not be accessible.</div>
      </noscript>
    </body>
</html>
