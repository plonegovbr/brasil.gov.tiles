<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="collective.cover">
    <head>
        <link rel="stylesheet" type="text/css"
              tal:attributes="href string:${context/@@plone_portal_state/portal_url}/++resource++brasil.gov.tiles/galleria.classic.css" />
        <script type="text/javascript" tal:content="structure view/init_js">
        </script>
    <tal:comment tal:replace="nothing">
        FIXME: Essa regra css pode ser removida quando o atributo footer_text for removido do tile MediaCarousel.
        Veja mais detalhes em IMediaCarouselTile.
    </tal:comment>
    <style type="text/css" media="screen">div[data-fieldname="mediacarousel.more_link"]{display:none;}</style>
    </head>
    <body tal:define="tile_id view/id;">
        <div class="mediacarousel tile-content"
             tal:attributes="id string:mediacarousel-$tile_id"
             tal:define="fields view/get_configured_fields;
                         items view/results">
            <tal:fields repeat="field fields">
                <tal:tile_title condition="python:field['id']=='tile_title' and view.show_tile_title()">
                    <span tal:define="htmltag python:field.get('htmltag', 'h2');
                                      tile_title view/data/tile_title"
                          tal:omit-tag="">
                        <h1 class="mediacarousel-tile"
                            tal:content="tile_title"
                            tal:condition="python:htmltag == 'h1'" />
                        <h2 class="mediacarousel-tile"
                            tal:content="tile_title"
                            tal:condition="python:htmltag == 'h2'" />
                        <h3 class="mediacarousel-tile"
                            tal:content="tile_title"
                            tal:condition="python:htmltag == 'h3'" />
                        <h4 class="mediacarousel-tile"
                            tal:content="tile_title"
                            tal:condition="python:htmltag == 'h4'" />
                    </span>
                </tal:tile_title>

                <div tal:condition="python:field['id']=='uuids' and items"
                     tal:attributes="id string:mediacarousel-gallerie-$tile_id">
                    <tal:items tal:repeat="item items">
                        <a tal:attributes="href python: view.get_media_url(item)">
                            <img tal:define="thumbnail python:view.thumbnail(item);
                                             uuid python:view.get_uuid(item);
                                             rights python:view.get_rights(item);"
                                 tal:condition="python:thumbnail and uuid"
                                 tal:attributes="alt python:view.get_description(item);
                                                 src thumbnail/url;
                                                 width thumbnail/width;
                                                 height thumbnail/height;
                                                 data-uuid uuid;
                                                 data-title python:view.get_title(item);
                                                 data-description python:view.get_description(item);
                                                 data-layer string:<div class='rights' style='display:none' data-index='${repeat/item/index}'>$rights</div>" />
                        </a>
                    </tal:items>
                </div>
                <div i18n:domain="brasil.gov.tiles" tal:condition="python:field['id']=='uuids' and not(items)" i18n:translate="">
                    Drag a folder or collection to populate the tile.
                </div>
                <div tal:condition="python:field['id']=='footer_text' and view.data.get('footer_text')" class="mediacarousel-footer-container">
                    <a class="mediacarousel-footer-link"
                       tal:define="more_link_text python:view.data.get('more_link_text')"
                       tal:content="python:more_link_text if more_link_text is not None else view.data.get('footer_text')"
                       tal:attributes="href view/data/footer_text">
                       </a>
                </div>
            </tal:fields>
        </div>
    </body>
</html>
